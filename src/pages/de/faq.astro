---
import { getEntry } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import FAQAccordion from '../../components/FAQAccordion.astro';
import { getTranslation } from '../../i18n/translations';
import { buildFaqPageSchema, getSiteOrigin } from '../../lib/seo';

const lang = 'de' as const;
const t = getTranslation(lang);

const faqPage = await getEntry('pages', 'faq');
const faqItems = faqPage.data.faq ?? [];
const localizedFaq = faqItems.map((item) => ({
  question: item.question[lang],
  answer: item.answer[lang],
}));
const siteOrigin = getSiteOrigin(Astro.site);
const structuredData = [buildFaqPageSchema(`${siteOrigin}/de/faq/`, localizedFaq)];
---

<BaseLayout
  title="Häufige Fragen | VallendarWohnen"
  description="Antworten auf die häufigsten Fragen zu unseren möblierten Studentenwohnungen in Vallendar: Mietbedingungen, Ausstattung, Buchung und mehr."
  lang={lang}
  structuredData={structuredData}
>
  <!-- Page Header -->
  <section class="bg-gradient-to-br from-accent-950 via-accent-800 to-accent-950 pb-16 pt-32">
    <div class="mx-auto max-w-6xl px-4 sm:px-6">
      <h1 class="text-4xl font-bold tracking-tight text-white sm:text-5xl">
        {t.sections.faq}
      </h1>
      <p class="mt-4 text-lg text-accent-100/80">
        Alles, was Sie vor einer Anfrage wissen sollten.
      </p>
    </div>
  </section>

  <!-- FAQ Content -->
  <section class="bg-white py-16 sm:py-20">
    <div class="mx-auto max-w-3xl px-4 sm:px-6">
      <FAQAccordion items={localizedFaq} />
      <div class="mt-10 rounded-xl border border-neutral-200 bg-neutral-50 p-6">
        <h2 class="font-serif text-xl font-bold text-neutral-900">Mehr Tipps für Austauschstudierende</h2>
        <p class="mt-3 text-sm text-neutral-600">Weitere Antworten finden Sie in unseren ausführlichen Guides zu Anreise, Budget und Wohnungsbuchung.</p>
        <a href="/de/guides/" class="mt-4 inline-flex text-sm font-semibold text-accent-700 hover:text-accent-900">Zu den Guides →</a>
      </div>
    </div>
  </section>
</BaseLayout>
